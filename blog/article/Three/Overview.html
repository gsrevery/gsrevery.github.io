<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>总体概览 | gp&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="学而时习之不亦说乎，有朋至远方来不亦乐乎。">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e32d6808.css" as="style"><link rel="preload" href="/blog/assets/js/app.038e3904.js" as="script"><link rel="preload" href="/blog/assets/js/2.241e249a.js" as="script"><link rel="preload" href="/blog/assets/js/1.7f6812c8.js" as="script"><link rel="preload" href="/blog/assets/js/63.7ce01baa.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d6c6ae10.js"><link rel="prefetch" href="/blog/assets/js/11.5d3063de.js"><link rel="prefetch" href="/blog/assets/js/12.3f432822.js"><link rel="prefetch" href="/blog/assets/js/13.659f6263.js"><link rel="prefetch" href="/blog/assets/js/14.4d1e4527.js"><link rel="prefetch" href="/blog/assets/js/15.4b3bbaaa.js"><link rel="prefetch" href="/blog/assets/js/16.e1b887ae.js"><link rel="prefetch" href="/blog/assets/js/17.3c6d46a7.js"><link rel="prefetch" href="/blog/assets/js/18.efc4fcc3.js"><link rel="prefetch" href="/blog/assets/js/19.e4b19d88.js"><link rel="prefetch" href="/blog/assets/js/20.ff3cf5e0.js"><link rel="prefetch" href="/blog/assets/js/21.e9414d30.js"><link rel="prefetch" href="/blog/assets/js/22.88ae7534.js"><link rel="prefetch" href="/blog/assets/js/23.88ebc354.js"><link rel="prefetch" href="/blog/assets/js/24.73dcb816.js"><link rel="prefetch" href="/blog/assets/js/25.b9ea98ae.js"><link rel="prefetch" href="/blog/assets/js/26.afff07f5.js"><link rel="prefetch" href="/blog/assets/js/27.0c835d96.js"><link rel="prefetch" href="/blog/assets/js/28.69c99317.js"><link rel="prefetch" href="/blog/assets/js/29.bb4203e6.js"><link rel="prefetch" href="/blog/assets/js/3.1fe88f52.js"><link rel="prefetch" href="/blog/assets/js/30.b5a17707.js"><link rel="prefetch" href="/blog/assets/js/31.78202dcd.js"><link rel="prefetch" href="/blog/assets/js/32.4faced0e.js"><link rel="prefetch" href="/blog/assets/js/33.006146e5.js"><link rel="prefetch" href="/blog/assets/js/34.ea6e5dc9.js"><link rel="prefetch" href="/blog/assets/js/35.d8e3e25c.js"><link rel="prefetch" href="/blog/assets/js/36.ce5fa1e4.js"><link rel="prefetch" href="/blog/assets/js/37.95e93b80.js"><link rel="prefetch" href="/blog/assets/js/38.6e156ef0.js"><link rel="prefetch" href="/blog/assets/js/39.5ffdc6b1.js"><link rel="prefetch" href="/blog/assets/js/4.eefd8839.js"><link rel="prefetch" href="/blog/assets/js/40.6d6b0db7.js"><link rel="prefetch" href="/blog/assets/js/41.d72661f6.js"><link rel="prefetch" href="/blog/assets/js/42.9e6962a1.js"><link rel="prefetch" href="/blog/assets/js/43.2c97f8f5.js"><link rel="prefetch" href="/blog/assets/js/44.1da00dd9.js"><link rel="prefetch" href="/blog/assets/js/45.a09b4fcb.js"><link rel="prefetch" href="/blog/assets/js/46.cbba27de.js"><link rel="prefetch" href="/blog/assets/js/47.450d187a.js"><link rel="prefetch" href="/blog/assets/js/48.7f6b92a5.js"><link rel="prefetch" href="/blog/assets/js/49.960c0d35.js"><link rel="prefetch" href="/blog/assets/js/5.4608adfd.js"><link rel="prefetch" href="/blog/assets/js/50.3ddbc0ac.js"><link rel="prefetch" href="/blog/assets/js/51.fd11be42.js"><link rel="prefetch" href="/blog/assets/js/52.ecbe8701.js"><link rel="prefetch" href="/blog/assets/js/53.fcbced41.js"><link rel="prefetch" href="/blog/assets/js/54.98ee780e.js"><link rel="prefetch" href="/blog/assets/js/55.87253a60.js"><link rel="prefetch" href="/blog/assets/js/56.46828d81.js"><link rel="prefetch" href="/blog/assets/js/57.f0a98f62.js"><link rel="prefetch" href="/blog/assets/js/58.1e5e7f42.js"><link rel="prefetch" href="/blog/assets/js/59.61fee913.js"><link rel="prefetch" href="/blog/assets/js/6.b82ddf3a.js"><link rel="prefetch" href="/blog/assets/js/60.6917e4d2.js"><link rel="prefetch" href="/blog/assets/js/61.383797e1.js"><link rel="prefetch" href="/blog/assets/js/62.da8cf5be.js"><link rel="prefetch" href="/blog/assets/js/64.6da5e4fe.js"><link rel="prefetch" href="/blog/assets/js/65.de326938.js"><link rel="prefetch" href="/blog/assets/js/66.71841dcc.js"><link rel="prefetch" href="/blog/assets/js/67.d6676c61.js"><link rel="prefetch" href="/blog/assets/js/68.9e557521.js"><link rel="prefetch" href="/blog/assets/js/69.9d131557.js"><link rel="prefetch" href="/blog/assets/js/7.db43f15e.js"><link rel="prefetch" href="/blog/assets/js/70.fb1dff31.js"><link rel="prefetch" href="/blog/assets/js/71.4ff3f1a3.js"><link rel="prefetch" href="/blog/assets/js/72.5c809dd6.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.80423ce8.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e32d6808.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">gp's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/JavaScript/Optimization.html" class="sidebar-link">优化</a></li><li><a href="/blog/article/JavaScript/Rule.html" class="sidebar-link">代码规范</a></li><li><a href="/blog/article/JavaScript/QA-daily.html" class="sidebar-link">练习题目</a></li><li><a href="/blog/article/JavaScript/Object.html" class="sidebar-link">对象</a></li><li><a href="/blog/article/JavaScript/Array.html" class="sidebar-link">数组</a></li><li><a href="/blog/article/JavaScript/Function.html" class="sidebar-link">函数</a></li><li><a href="/blog/article/JavaScript/Ram.html" class="sidebar-link">内存</a></li><li><a href="/blog/article/JavaScript/Method.html" class="sidebar-link">常用方法</a></li><li><a href="/blog/article/JavaScript/PublicFunction.html" class="sidebar-link">公共方法</a></li><li><a href="/blog/article/JavaScript/Robustness.html" class="sidebar-link">代码健壮性</a></li><li><a href="/blog/article/JavaScript/Tree.html" class="sidebar-link">树</a></li><li><a href="/blog/article/JavaScript/This.html" class="sidebar-link">this指向</a></li><li><a href="/blog/article/JavaScript/EventLoop.html" class="sidebar-link">事件循环机制</a></li><li><a href="/blog/article/JavaScript/CrossDomain.html" class="sidebar-link">跨域</a></li><li><a href="/blog/article/JavaScript/Bubble.html" class="sidebar-link">冒泡</a></li><li><a href="/blog/article/JavaScript/CommonlyMethod.html" class="sidebar-link">数据特殊处理</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Css/Css.html" class="sidebar-link">css</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Vue/Components.html" class="sidebar-link">组件</a></li><li><a href="/blog/article/Vue/CrossDomain.html" class="sidebar-link">跨域</a></li><li><a href="/blog/article/Vue/Reconstruction.html" class="sidebar-link">项目重构优化</a></li><li><a href="/blog/article/Vue/Question.html" class="sidebar-link">vue问题</a></li><li><a href="/blog/article/Vue/FileHandle.html" class="sidebar-link">文件处理</a></li><li><a href="/blog/article/Vue/Router.html" class="sidebar-link">路由</a></li><li><a href="/blog/article/Vue/Table.html" class="sidebar-link">表格</a></li><li><a href="/blog/article/Vue/SpecialPage.html" class="sidebar-link">页面</a></li><li><a href="/blog/article/Vue/Seo.html" class="sidebar-link">SEO优化</a></li><li><a href="/blog/article/Vue/Package.html" class="sidebar-link">package配置</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/APP/UniApp.html" class="sidebar-link">uni-app</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Other/Git.html" class="sidebar-link">git操作</a></li><li><a href="/blog/article/Other/Canvas.html" class="sidebar-link">canvas</a></li><li><a href="/blog/article/Other/Qiankun.html" class="sidebar-link">qiankun</a></li><li><a href="/blog/article/Other/LODOP.html" class="sidebar-link">lodop插件</a></li><li><a href="/blog/article/Other/Npm.html" class="sidebar-link">npm私有库</a></li><li><a href="/blog/article/Other/Interview.html" class="sidebar-link">问题总结</a></li><li><a href="/blog/article/Other/ProjectLssues.html" class="sidebar-link">运行项目问题</a></li><li><a href="/blog/article/Other/OnlinePayment.html" class="sidebar-link">在线支付</a></li><li><a href="/blog/article/Other/PluginUnit.html" class="sidebar-link">js常用的各种插件</a></li><li><a href="/blog/article/Other/Vscode.html" class="sidebar-link">vscode常用插件</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Three</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Three/Overview.html" aria-current="page" class="active sidebar-link">Three概览</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#基础渲染" class="sidebar-link">基础渲染</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建一个canvas画布" class="sidebar-link">创建一个canvas画布</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建场景-scene" class="sidebar-link">创建场景-scene</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#光源" class="sidebar-link">光源</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#相机-camera" class="sidebar-link">相机-camera</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建渲染器-renderer-webglrenderer" class="sidebar-link">创建渲染器-renderer（WebGLRenderer）</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#模型" class="sidebar-link">模型</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#边框" class="sidebar-link">边框</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#功能" class="sidebar-link">功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#模型拖动" class="sidebar-link">模型拖动</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#碰撞检测-raycaste、box3" class="sidebar-link">碰撞检测（Raycaste、Box3）</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#视角切换" class="sidebar-link">视角切换</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#模型贴图" class="sidebar-link">模型贴图</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#智能装箱功能" class="sidebar-link">智能装箱功能</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建字体-textgeometry" class="sidebar-link">创建字体（TextGeometry）</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建三维坐标轴-axeshelper" class="sidebar-link">创建三维坐标轴（AxesHelper）</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建线条-line" class="sidebar-link">创建线条（Line）</a></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#创建控件对象-orbitcontrols" class="sidebar-link">创建控件对象（OrbitControls）</a></li></ul></li><li class="sidebar-sub-header"><a href="/blog/article/Three/Overview.html#优化" class="sidebar-link">优化</a></li></ul></li><li><a href="/blog/article/Three/Optimize.html" class="sidebar-link">Three性能优化</a></li><li><a href="/blog/article/Three/IntelligentPackingFunction.html" class="sidebar-link">Three常见问题及解决方案</a></li><li><a href="/blog/article/Three/Cannon.html" class="sidebar-link">Cannon物理引擎</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="总体概览"><a href="#总体概览" class="header-anchor">#</a> 总体概览</h1> <h2 id="基础渲染"><a href="#基础渲染" class="header-anchor">#</a> 基础渲染</h2> <h3 id="创建一个canvas画布"><a href="#创建一个canvas画布" class="header-anchor">#</a> 创建一个canvas画布</h3> <h3 id="创建场景-scene"><a href="#创建场景-scene" class="header-anchor">#</a> 创建场景-scene</h3> <p>定义：添加3D对象的地方，在实际开发中场景是透明的、看不见的，需要做相关的设置</p> <p>作用</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    Scene 对象是所有不同对象的容器，也就是说该对象保存所有物体、光源、摄像机以及渲染所需的其他对象。
    Scene 对象又是被称为场景图，它不仅仅是一个对象数组，还包含了整个场景图树形结构中的所有节点：
     * 每个添加到 Three.js 场景的对象，甚至包括 THREE.Scene 本身都是继承自一个名为 THREE.Object3D 的对象。
     * 每个 THREE.Object3D 对象也可以有自己的子对象，我们可以使用它的子对象来创建一个 Three.js 能解释和渲染的对象树。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>常用方法及属性</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    add(object)： 用于向场景中添加对象。使用该方法还可以创建对象组。
    children：用于返回一个场景中所有对象的列表，包括摄像机和光源。
    getObjectByName(name,recursive)：在创建对象时可以指定唯一的标识 name，使用该方法可以查找特定名字的对象。
     * 当参数 recursive 设置为 false 时，在调用者子元素上查找
     * 当参数 recursive 设置为 true 时，在调用者的所有后代对象上查找

    remove(object)： object 为场景中对象的引用，使用该方法可以将对象从场景中移除。  
    traverse(function)：该方法也可以遍历调用者和调用者的所有后代，function 参数是一个函数，被调用者和每一个后代对象调用 function 方法。
    fog ：使用该属性可以为场景添加雾化效果，可以产生隐藏远处物体的浓雾效果。  
    overrideMaterial：使用该属性可以强制场景中的所有物体使用相同的材质。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><p>scene场景的结构</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>group
    group
        mesh
        line
        point

    group
        mesh
        line
        point


group
    group
        mesh
        line
        point


group
    mesh
    line
    point

light
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br></div></div><h3 id="光源"><a href="#光源" class="header-anchor">#</a> 光源</h3> <p>光源的类型</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    环境光（AmbientLight）
        该光源没有特定的方向，不会产生阴影。

    点光源（PointLight）
        一个向各个方向发光的光源从一个点发出。

    定向光（DirectionalLight）
        发出的所有光线彼此平行，太阳就是一个很好的例子。

    聚光灯（SpotLight）
        最常使用的灯之一（尤其是如果您想要使用阴影），THREE.SpotLight是一种具有锥形效果的光源，你可以将其与手电筒或灯笼进行比较，这种光有方向和角度它产生光。

    半球光（HemisphereLight ）
    区域光（AreaLight）
    镜头光晕（LensFlare）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>创建光源</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.创建光源
    2.设置光源的位置
    3.打开或者关闭阴影
    4.将光源添加进入场景
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="相机-camera"><a href="#相机-camera" class="header-anchor">#</a> 相机-camera</h3> <p>相机的类型：</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.正交相机orthographic：在这种投影模式下，渲染图像中的对象大小保持不变，无论其与相机的距离如何。这对于渲染 2D 场景和 UI 元素等非常有用。
    2.透视相机perspective：这种投影模式旨在模仿人眼看到的方式。它是用于渲染 3D 场景的最常见的投影模式。
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>创建相机</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.创建相机（PerspectiveCamera）
    2.设置相机的位置
    3.设置相机以那个方向为上方
    4.设置相机看向那个坐标
    5.将相机添加进入场景
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="创建渲染器-renderer-webglrenderer"><a href="#创建渲染器-renderer-webglrenderer" class="header-anchor">#</a> 创建渲染器-renderer（WebGLRenderer）</h3> <h3 id="模型"><a href="#模型" class="header-anchor">#</a> 模型</h3> <p>几何体</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    缓冲类几何体（BufferGeometry）
    长方体（BoxGeometry）
    圆柱体、圆锥、三面体、四面体（梯形）（CircleGeometry）
    圆锥体（ConeGeometry）
    球体（SphereGeometry）
    立方体边框（BoxHelper）
        入参：模型和颜色
            边框不需要进行设定位置，会自动在模型边上进行吸附


    圆柱体、梯形边框（EdgesGeometry）
        let cubeGeometry = new THREE.CylinderGeometry((80, 80, 50, 40, 40)   // 创建一个圆柱材质
        let cylinderEdges = new THREE.EdgesGeometry(cubeGeometry, 1);   // 创建一个圆柱边框
        let edgesMtl = new THREE.LineBasicMaterial({ color: ‘red’})  // 创建基础线条材质
        let border = new THREE.LineSegments(cylinderEdges, edgesMtl);  //  创建线框
        cube.add(border );   // 将线框加入几何体中
    
    不规则模型（Shape）
        先使用Shape创建一个不规则平面（使用点到点连线）
        再将平面加厚则可以得到一个不规则模型
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>创建模型mesh</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.创建几何体
    2.创建材质
    3.设置几何体位置
    4.添加进入场景scene
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>引入模型</p> <p><code>three.js</code>可以引入的模型格式有以下几种：gltf、obj、stl、FBX(没试过)，推荐使用gltf格式，gltf格式的模型可以进行压缩，体积更小，加载更快。</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 引入模型</span>
<span class="token function">loadFenceModel</span><span class="token punctuation">(</span><span class="token parameter">options <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
        <span class="token keyword">let</span> <span class="token punctuation">{</span> path<span class="token punctuation">,</span> length<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height <span class="token punctuation">}</span> <span class="token operator">=</span> options
        <span class="token comment">// gltf格式</span>
        <span class="token keyword">const</span> dracoLoader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DRACOLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        dracoLoader<span class="token punctuation">.</span><span class="token function">setDecoderPath</span><span class="token punctuation">(</span><span class="token string">'/gltf/'</span><span class="token punctuation">)</span> <span class="token comment">// public/gltf</span>
        dracoLoader<span class="token punctuation">.</span><span class="token function">preload</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">const</span> loader <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">GLTFLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        loader<span class="token punctuation">.</span><span class="token function">setDRACOLoader</span><span class="token punctuation">(</span>dracoLoader<span class="token punctuation">)</span>
        loader<span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span>path<span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">gltf</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
            gltf<span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">traverse</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">object<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
                <span class="token comment">// if (object.isMesh) { // 调整模型中心点</span>
                <span class="token comment">//     object.applyMatrix4(new THREE.Matrix4().makeTranslation(0, 0, 0))</span>
                <span class="token comment">// }</span>
            <span class="token punctuation">}</span><span class="token punctuation">)</span>
            <span class="token keyword">const</span> carMesh <span class="token operator">=</span> gltf<span class="token punctuation">.</span>scene
            carMesh<span class="token punctuation">.</span>name <span class="token operator">=</span> <span class="token string">'car-mesh'</span>
            <span class="token comment">// carMesh.scale.set(50, 50, 50)</span>
            carMesh<span class="token punctuation">.</span>scale<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span>length<span class="token punctuation">,</span> width<span class="token punctuation">,</span> height<span class="token punctuation">)</span>
            carMesh<span class="token punctuation">.</span>position<span class="token punctuation">.</span><span class="token function">set</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">)</span>
            <span class="token comment">// console.log(carMesh);</span>
            <span class="token comment">// console.log(this, 'this');</span>
            <span class="token keyword">this</span><span class="token punctuation">.</span>scene<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>carMesh<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// obj格式</span>
        <span class="token comment">// const objLoader = new OBJLoader()</span>
        <span class="token comment">// objLoader.load(path, (object) =&gt; {</span>
        <span class="token comment">//     console.log(object, '9999')</span>
        <span class="token comment">//     console.log(this, '00000')</span>
        <span class="token comment">//     object.castShadow = true</span>
        <span class="token comment">//     object.receiveShadow = true</span>
        <span class="token comment">//     object.scale.set(50, 50, 50)</span>
        <span class="token comment">//     object.position.set(0, 0, 0)</span>
        <span class="token comment">//     this.scene.add(object)</span>
        <span class="token comment">//     resolve()</span>
        <span class="token comment">// })</span>
        <span class="token comment">// stl格式</span>
        <span class="token comment">// const stlLoader = new STLLoader()</span>
        <span class="token comment">// stlLoader.load(path, (geometry) =&gt; {</span>
        <span class="token comment">//     const material = new THREE.MeshPhongMaterial({ color: 0xff5533, specular: 0x111111, shininess: 200 });</span>
        <span class="token comment">//     const mesh = new THREE.Mesh(geometry, material)</span>
        <span class="token comment">//     mesh.scale.set(0.2, 0.2, 0.2)</span>
        <span class="token comment">//     mesh.position.set(0, 0, 0)</span>
        <span class="token comment">//     this.scene.add(mesh)</span>
        <span class="token comment">//     resolve()</span>
        <span class="token comment">// })</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br></div></div><h3 id="边框"><a href="#边框" class="header-anchor">#</a> 边框</h3> <p>给模型添加边框的两种方式</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法一：</span>
<span class="token keyword">let</span> cubeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxGeometry</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">90</span><span class="token punctuation">)</span>
<span class="token keyword">let</span> cube <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>Mesh</span><span class="token punctuation">(</span>cubeGeometry<span class="token punctuation">,</span> cubeMaterial<span class="token punctuation">)</span>
<span class="token keyword">let</span> cubeMaterial <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>MeshLambertMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token comment">// 将需要的参数加入group中</span>
group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>cube<span class="token punctuation">)</span>
<span class="token keyword">let</span> border <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>BoxHelper</span><span class="token punctuation">(</span>cube<span class="token punctuation">,</span> <span class="token string">'red'</span><span class="token punctuation">)</span>
group<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>border<span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p><strong>注意1：用这种方法，只适合与立方体</strong></p> <p><strong>注意2：用这种方法，比如我要旋转立方体，边框不会跟着改变。</strong></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 方法二：</span>
<span class="token keyword">let</span> cubeGeometry <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>CylinderGeometry</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">50</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">)</span>   <span class="token comment">// 创建一个圆柱材质</span>
<span class="token keyword">let</span> cylinderEdges <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>EdgesGeometry</span><span class="token punctuation">(</span>cubeGeometry<span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 创建一个圆柱边框</span>
<span class="token keyword">let</span> edgesMtl <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineBasicMaterial</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token literal-property property">color</span><span class="token operator">:</span> <span class="token string">'red'</span><span class="token punctuation">}</span><span class="token punctuation">)</span>  <span class="token comment">// 创建基础线条材质</span>
<span class="token keyword">let</span> border <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>LineSegments</span><span class="token punctuation">(</span>cylinderEdges<span class="token punctuation">,</span> edgesMtl<span class="token punctuation">)</span><span class="token punctuation">;</span>  <span class="token comment">//  创建线框</span>
cube<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>border <span class="token punctuation">)</span><span class="token punctuation">;</span>   <span class="token comment">// 将线框加入几何体中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p><strong>注意：用这种方法，比如我要旋转立方体，边框会跟着改变。</strong></p> <h2 id="功能"><a href="#功能" class="header-anchor">#</a> 功能</h2> <h3 id="模型拖动"><a href="#模型拖动" class="header-anchor">#</a> 模型拖动</h3> <p>鼠标拖动DragControls属性</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    dragstart：开始移动
    drag：移动中
    dragend：结束移动
    hoveron：移动鼠标在模型上
    hoveroff：移动鼠标离开模型
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>键盘按键移动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    addEventListener()
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>创建模型拖动</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.创建模型拖动对象（DragControls）
        传入mesh集合、相机对象、渲染器对象

    2.创建拖动事件
        可以改变拖动颜色，获取拖动后的坐标等等
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="碰撞检测-raycaste、box3"><a href="#碰撞检测-raycaste、box3" class="header-anchor">#</a> 碰撞检测（Raycaste、Box3）</h3> <p>Raycaste()：在物体的各个顶点发出射线，计算是否和其他物体相交。</p> <p>Box3()：在物体上创建包围盒，计算两个物体包围盒是否相交。</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>    1.创建当前拖动的mesh为meshA
        let meshA = new THREE.Box3(new THREE.Vector3(), new THREE.Vector3())

    2.循环其他需要参与碰撞检测的mesh
    3.创建循环体内将每一个mesh为meshB
        let meshB= new THREE.Box3(new THREE.Vector3(), new THREE.Vector3())

    4.判断meshA是否与meshB重合（meshA.intersectsBox(meshB)）
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><p><strong>注意：碰撞检测，检测的是最外层mesh</strong></p> <h3 id="视角切换"><a href="#视角切换" class="header-anchor">#</a> 视角切换</h3> <p>补间动画（TWEEN.Tween）: 让视角切换更平滑</p> <p>设置相机位置（position.set）</p> <h3 id="模型贴图"><a href="#模型贴图" class="header-anchor">#</a> 模型贴图</h3> <p>贴canvas（CanvasTexture）</p> <ol><li>创建一个canvas元素</li> <li>作为一个参数传入THREE.CanvasTexture</li> <li>贴图纹理更新texture.needsUpdate = true</li></ol> <p>贴图片TextureLoader()</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">var</span> texture <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">THREE<span class="token punctuation">.</span>TextureLoader</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token string">'/favico.ico'</span><span class="token punctuation">)</span>
texture<span class="token punctuation">.</span>wrapS <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RepeatWrapping
texture<span class="token punctuation">.</span>wrapT <span class="token operator">=</span> <span class="token constant">THREE</span><span class="token punctuation">.</span>RepeatWrapping
meshParamsNo<span class="token punctuation">.</span>map <span class="token operator">=</span> texture
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="智能装箱功能"><a href="#智能装箱功能" class="header-anchor">#</a> 智能装箱功能</h2> <h3 id="创建字体-textgeometry"><a href="#创建字体-textgeometry" class="header-anchor">#</a> 创建字体（TextGeometry）</h3> <ol><li>创建字体对象（FontLoader）</li> <li>引入字体json文件</li> <li>创建文字几何图形（TextGeometry）</li> <li>创建文字的正面和侧面集合（MeshPhongMaterial）</li> <li>创建一个mesh模型将文字几何图形和文字集合放入其中</li> <li>将mesh模型加入场景中</li></ol> <h3 id="创建三维坐标轴-axeshelper"><a href="#创建三维坐标轴-axeshelper" class="header-anchor">#</a> 创建三维坐标轴（AxesHelper）</h3> <ol><li>创建三维坐标系</li> <li>创建好坐标系将其加入场景中</li></ol> <h3 id="创建线条-line"><a href="#创建线条-line" class="header-anchor">#</a> 创建线条（Line）</h3> <ol><li>创建材质（LineBasicMaterial）</li> <li>创建空间几何体（BufferGeometry）</li> <li>创建顶点集合（Vector3）</li> <li>绑定顶点到创建好的空间几何体（setFromPoints）</li> <li>创建线条（Line）</li> <li>将线条添加进场景中</li></ol> <h3 id="创建控件对象-orbitcontrols"><a href="#创建控件对象-orbitcontrols" class="header-anchor">#</a> 创建控件对象（OrbitControls）</h3> <ol><li>创建控件对象（OrbitControls）</li> <li>修改鼠标控制事件
<ul><li>上下滚动鼠标中键：缩放三维场景</li> <li>鼠标左键：720旋转展示三维场景</li> <li>鼠标右键：可以平移三维场景（关闭）</li></ul></li></ol> <h2 id="优化"><a href="#优化" class="header-anchor">#</a> 优化</h2> <p><strong>注意：避免重复创建模型对象，可以使用clone()方法</strong></p> <ul><li>clone()返回一个新的几何体对象，返回新的几何体对象包含原来的几何体顶点数据、顶点索引数据、UV坐标数据。</li> <li>threejs中的clone方法是一个浅度的clone，clone复制了新的对象，但是原对象内部的对象（属性为对象）不会被clone，我们需要对内部对象也进行clone就可以</li></ul> <p>常见问题</p> <ul><li>在用copy()和clone()进行对象复制后，使用Raycaster射线做obj模型选择时，使用clone方式选择指定对象对其颜色进行增强，但是修改新对象的material原皮肤也变更。</li> <li>在使用模型拖动的时候，当前页面/场景会出现卡顿现象，这是因为模型拖动的过程中，会不断的进行渲染，导致页面卡顿，可以使用requestAnimationFrame()方法来降低场景渲染帧率进行优化。</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/blog/article/Other/Vscode.html" class="prev">
        vscode常用插件
      </a></span> <span class="next"><a href="/blog/article/Three/Optimize.html">
        Three性能优化
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.038e3904.js" defer></script><script src="/blog/assets/js/2.241e249a.js" defer></script><script src="/blog/assets/js/1.7f6812c8.js" defer></script><script src="/blog/assets/js/63.7ce01baa.js" defer></script>
  </body>
</html>
