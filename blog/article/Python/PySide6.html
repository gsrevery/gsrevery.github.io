<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>PySide6ä½¿ç”¨ | gp&#39;s blog</title>
    <meta name="generator" content="VuePress 1.9.10">
    
    <meta name="description" content="å­¦è€Œæ—¶ä¹ ä¹‹ä¸äº¦è¯´ä¹ï¼Œæœ‰æœ‹è‡³è¿œæ–¹æ¥ä¸äº¦ä¹ä¹ã€‚">
    
    <link rel="preload" href="/blog/assets/css/0.styles.e32d6808.css" as="style"><link rel="preload" href="/blog/assets/js/app.95d1cef2.js" as="script"><link rel="preload" href="/blog/assets/js/2.dd56d6fa.js" as="script"><link rel="preload" href="/blog/assets/js/1.05d0606b.js" as="script"><link rel="preload" href="/blog/assets/js/64.4db62b40.js" as="script"><link rel="prefetch" href="/blog/assets/js/10.d6c6ae10.js"><link rel="prefetch" href="/blog/assets/js/11.76751111.js"><link rel="prefetch" href="/blog/assets/js/12.3f432822.js"><link rel="prefetch" href="/blog/assets/js/13.659f6263.js"><link rel="prefetch" href="/blog/assets/js/14.b7d50a96.js"><link rel="prefetch" href="/blog/assets/js/15.f2ea1e73.js"><link rel="prefetch" href="/blog/assets/js/16.e1b887ae.js"><link rel="prefetch" href="/blog/assets/js/17.3c6d46a7.js"><link rel="prefetch" href="/blog/assets/js/18.6933475c.js"><link rel="prefetch" href="/blog/assets/js/19.e4b19d88.js"><link rel="prefetch" href="/blog/assets/js/20.ff3cf5e0.js"><link rel="prefetch" href="/blog/assets/js/21.da843f56.js"><link rel="prefetch" href="/blog/assets/js/22.88ae7534.js"><link rel="prefetch" href="/blog/assets/js/23.ef58a1cf.js"><link rel="prefetch" href="/blog/assets/js/24.015b2e47.js"><link rel="prefetch" href="/blog/assets/js/25.b9ea98ae.js"><link rel="prefetch" href="/blog/assets/js/26.afff07f5.js"><link rel="prefetch" href="/blog/assets/js/27.4f749e22.js"><link rel="prefetch" href="/blog/assets/js/28.db5dceeb.js"><link rel="prefetch" href="/blog/assets/js/29.424d615d.js"><link rel="prefetch" href="/blog/assets/js/3.1fe88f52.js"><link rel="prefetch" href="/blog/assets/js/30.55370f33.js"><link rel="prefetch" href="/blog/assets/js/31.a2ef508f.js"><link rel="prefetch" href="/blog/assets/js/32.e41c0b91.js"><link rel="prefetch" href="/blog/assets/js/33.006146e5.js"><link rel="prefetch" href="/blog/assets/js/34.d5412c8a.js"><link rel="prefetch" href="/blog/assets/js/35.4d4bdb76.js"><link rel="prefetch" href="/blog/assets/js/36.da619ea8.js"><link rel="prefetch" href="/blog/assets/js/37.011124d2.js"><link rel="prefetch" href="/blog/assets/js/38.6e156ef0.js"><link rel="prefetch" href="/blog/assets/js/39.00ba53dc.js"><link rel="prefetch" href="/blog/assets/js/4.f354b7a5.js"><link rel="prefetch" href="/blog/assets/js/40.0699260a.js"><link rel="prefetch" href="/blog/assets/js/41.5834c084.js"><link rel="prefetch" href="/blog/assets/js/42.711c5521.js"><link rel="prefetch" href="/blog/assets/js/43.44528f35.js"><link rel="prefetch" href="/blog/assets/js/44.da96ff0e.js"><link rel="prefetch" href="/blog/assets/js/45.8dd701e9.js"><link rel="prefetch" href="/blog/assets/js/46.585555a0.js"><link rel="prefetch" href="/blog/assets/js/47.c0938123.js"><link rel="prefetch" href="/blog/assets/js/48.f3664d9d.js"><link rel="prefetch" href="/blog/assets/js/49.a489ca1f.js"><link rel="prefetch" href="/blog/assets/js/5.cd1a2312.js"><link rel="prefetch" href="/blog/assets/js/50.ea2493a2.js"><link rel="prefetch" href="/blog/assets/js/51.59649d9f.js"><link rel="prefetch" href="/blog/assets/js/52.a8f9c310.js"><link rel="prefetch" href="/blog/assets/js/53.f6e7ba1a.js"><link rel="prefetch" href="/blog/assets/js/54.1b302df0.js"><link rel="prefetch" href="/blog/assets/js/55.31623364.js"><link rel="prefetch" href="/blog/assets/js/56.a727b56c.js"><link rel="prefetch" href="/blog/assets/js/57.fc50f9fe.js"><link rel="prefetch" href="/blog/assets/js/58.83bdfda3.js"><link rel="prefetch" href="/blog/assets/js/59.a935ae25.js"><link rel="prefetch" href="/blog/assets/js/6.21902164.js"><link rel="prefetch" href="/blog/assets/js/60.2640c0e6.js"><link rel="prefetch" href="/blog/assets/js/61.1c66210c.js"><link rel="prefetch" href="/blog/assets/js/62.ec487adf.js"><link rel="prefetch" href="/blog/assets/js/63.8029a8bf.js"><link rel="prefetch" href="/blog/assets/js/65.5f9ee2be.js"><link rel="prefetch" href="/blog/assets/js/66.50270f75.js"><link rel="prefetch" href="/blog/assets/js/67.6658d81f.js"><link rel="prefetch" href="/blog/assets/js/68.629a4ae1.js"><link rel="prefetch" href="/blog/assets/js/69.3a46e860.js"><link rel="prefetch" href="/blog/assets/js/7.2b89de10.js"><link rel="prefetch" href="/blog/assets/js/70.5e912eac.js"><link rel="prefetch" href="/blog/assets/js/71.1640dba1.js"><link rel="prefetch" href="/blog/assets/js/72.32d6a03f.js"><link rel="prefetch" href="/blog/assets/js/73.63ed6547.js"><link rel="prefetch" href="/blog/assets/js/74.30db84d2.js"><link rel="prefetch" href="/blog/assets/js/75.44ed3954.js"><link rel="prefetch" href="/blog/assets/js/vendors~docsearch.e2498148.js">
    <link rel="stylesheet" href="/blog/assets/css/0.styles.e32d6808.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/blog/" class="home-link router-link-active"><!----> <span class="site-name">gp's blog</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/blog/article/JavaScript/Rule.html" class="nav-link">
  Blog
</a></div><div class="nav-item"><a href="/blog/AboutMe.html" class="nav-link">
  Resume
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>JavaScript</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/JavaScript/Optimization.html" class="sidebar-link">ä¼˜åŒ–</a></li><li><a href="/blog/article/JavaScript/Rule.html" class="sidebar-link">ä»£ç è§„èŒƒ</a></li><li><a href="/blog/article/JavaScript/QA-daily.html" class="sidebar-link">ç»ƒä¹ é¢˜ç›®</a></li><li><a href="/blog/article/JavaScript/Object.html" class="sidebar-link">å¯¹è±¡</a></li><li><a href="/blog/article/JavaScript/Array.html" class="sidebar-link">æ•°ç»„</a></li><li><a href="/blog/article/JavaScript/Function.html" class="sidebar-link">å‡½æ•°</a></li><li><a href="/blog/article/JavaScript/Ram.html" class="sidebar-link">å†…å­˜</a></li><li><a href="/blog/article/JavaScript/Method.html" class="sidebar-link">å¸¸ç”¨æ–¹æ³•</a></li><li><a href="/blog/article/JavaScript/PublicFunction.html" class="sidebar-link">å…¬å…±æ–¹æ³•</a></li><li><a href="/blog/article/JavaScript/Robustness.html" class="sidebar-link">ä»£ç å¥å£®æ€§</a></li><li><a href="/blog/article/JavaScript/Tree.html" class="sidebar-link">æ ‘</a></li><li><a href="/blog/article/JavaScript/This.html" class="sidebar-link">thisæŒ‡å‘</a></li><li><a href="/blog/article/JavaScript/EventLoop.html" class="sidebar-link">äº‹ä»¶å¾ªç¯æœºåˆ¶</a></li><li><a href="/blog/article/JavaScript/CrossDomain.html" class="sidebar-link">è·¨åŸŸ</a></li><li><a href="/blog/article/JavaScript/Bubble.html" class="sidebar-link">å†’æ³¡</a></li><li><a href="/blog/article/JavaScript/CommonlyMethod.html" class="sidebar-link">æ•°æ®ç‰¹æ®Šå¤„ç†</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>css</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Css/Css.html" class="sidebar-link">css</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Vue</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Vue/Components.html" class="sidebar-link">ç»„ä»¶</a></li><li><a href="/blog/article/Vue/CrossDomain.html" class="sidebar-link">è·¨åŸŸ</a></li><li><a href="/blog/article/Vue/Reconstruction.html" class="sidebar-link">é¡¹ç›®é‡æ„ä¼˜åŒ–</a></li><li><a href="/blog/article/Vue/Question.html" class="sidebar-link">vueé—®é¢˜</a></li><li><a href="/blog/article/Vue/FileHandle.html" class="sidebar-link">æ–‡ä»¶å¤„ç†</a></li><li><a href="/blog/article/Vue/Router.html" class="sidebar-link">è·¯ç”±</a></li><li><a href="/blog/article/Vue/Table.html" class="sidebar-link">è¡¨æ ¼</a></li><li><a href="/blog/article/Vue/SpecialPage.html" class="sidebar-link">é¡µé¢</a></li><li><a href="/blog/article/Vue/Seo.html" class="sidebar-link">SEOä¼˜åŒ–</a></li><li><a href="/blog/article/Vue/Package.html" class="sidebar-link">packageé…ç½®</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>App</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/APP/UniApp.html" class="sidebar-link">uni-app</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Other</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Other/Git.html" class="sidebar-link">gitæ“ä½œ</a></li><li><a href="/blog/article/Other/Canvas.html" class="sidebar-link">canvas</a></li><li><a href="/blog/article/Other/Qiankun.html" class="sidebar-link">qiankun</a></li><li><a href="/blog/article/Other/LODOP.html" class="sidebar-link">lodopæ’ä»¶</a></li><li><a href="/blog/article/Other/Npm.html" class="sidebar-link">npmç§æœ‰åº“</a></li><li><a href="/blog/article/Other/Interview.html" class="sidebar-link">é—®é¢˜æ€»ç»“</a></li><li><a href="/blog/article/Other/ProjectLssues.html" class="sidebar-link">è¿è¡Œé¡¹ç›®é—®é¢˜</a></li><li><a href="/blog/article/Other/OnlinePayment.html" class="sidebar-link">åœ¨çº¿æ”¯ä»˜</a></li><li><a href="/blog/article/Other/PluginUnit.html" class="sidebar-link">jså¸¸ç”¨çš„å„ç§æ’ä»¶</a></li><li><a href="/blog/article/Other/Vscode.html" class="sidebar-link">vscodeå¸¸ç”¨æ’ä»¶</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Three</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Three/Overview.html" class="sidebar-link">Threeæ¦‚è§ˆ</a></li><li><a href="/blog/article/Three/Optimize.html" class="sidebar-link">Threeæ€§èƒ½ä¼˜åŒ–</a></li><li><a href="/blog/article/Three/IntelligentPackingFunction.html" class="sidebar-link">Threeå¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</a></li><li><a href="/blog/article/Three/Cannon.html" class="sidebar-link">Cannonç‰©ç†å¼•æ“</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Python</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/blog/article/Python/Grammar.html" class="sidebar-link">Grammar</a></li><li><a href="/blog/article/Python/PySide6.html" aria-current="page" class="active sidebar-link">PySide6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/blog/article/Python/PySide6.html#è‡ªå®šä¹‰çª—å£" class="sidebar-link">è‡ªå®šä¹‰çª—å£</a></li><li class="sidebar-sub-header"><a href="/blog/article/Python/PySide6.html#æ•°æ®ä¼ é€’" class="sidebar-link">æ•°æ®ä¼ é€’</a></li><li class="sidebar-sub-header"><a href="/blog/article/Python/PySide6.html#pyside6å¯è§†åŒ–ä½¿ç”¨" class="sidebar-link">Pyside6å¯è§†åŒ–ä½¿ç”¨</a></li></ul></li><li><a href="/blog/article/Python/Use.html" class="sidebar-link">Use</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="pyside6ä½¿ç”¨"><a href="#pyside6ä½¿ç”¨" class="header-anchor">#</a> PySide6ä½¿ç”¨</h1> <h2 id="è‡ªå®šä¹‰çª—å£"><a href="#è‡ªå®šä¹‰çª—å£" class="header-anchor">#</a> è‡ªå®šä¹‰çª—å£</h2> <p>ä¸‹é¢æ˜¯ä¸€ä¸ªå®Œæ•´çš„è‡ªå®šä¹‰çª—å£çš„ä¾‹å­ï¼ŒåŒ…æ‹¬å›¾æ ‡æ›´æ”¹ï¼ŒæŒ‰é’®æ·»åŠ ï¼Œæœ€å°åŒ–ã€æœ€å¤§åŒ–ã€å…³é—­çª—å£ï¼Œçª—å£æ‹–æ‹½åŠŸèƒ½çš„é‡å†™ã€‚</p> <details><summary><b>è‡ªå®šä¹‰çª—å£</b></summary> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">import</span> sys
<span class="token keyword">import</span> os

<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Qt
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtWidgets <span class="token keyword">import</span> <span class="token punctuation">(</span>
    QApplication<span class="token punctuation">,</span> QMainWindow<span class="token punctuation">,</span> QWidget<span class="token punctuation">,</span> 
    QHBoxLayout<span class="token punctuation">,</span> QLabel<span class="token punctuation">,</span> QSizePolicy
<span class="token punctuation">)</span>
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span>  QIcon<span class="token punctuation">,</span> QAction

<span class="token keyword">class</span> <span class="token class-name">MainWindow</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>

        <span class="token comment"># è®¾ç½®çª—å£ä¸ºå…¨å±æ˜¾ç¤º</span>
        <span class="token comment"># self.showMaximized()</span>
        self<span class="token punctuation">.</span>resize<span class="token punctuation">(</span><span class="token number">1200</span><span class="token punctuation">,</span> <span class="token number">800</span><span class="token punctuation">)</span>
        <span class="token comment"># è®¾ç½®æ— è¾¹æ¡†çª—å£ï¼ˆå¯é€‰ï¼Œç”¨äºå®Œå…¨è‡ªå®šä¹‰æ ‡é¢˜æ ï¼‰</span>
        self<span class="token punctuation">.</span>setWindowFlags<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>FramelessWindowHint<span class="token punctuation">)</span>
        <span class="token comment"># çª—å£æ‹–åŠ¨ç›¸å…³å±æ€§</span>
        self<span class="token punctuation">.</span>drag_position <span class="token operator">=</span> <span class="token boolean">None</span>
        self<span class="token punctuation">.</span>is_dragging <span class="token operator">=</span> <span class="token boolean">False</span>
        
        <span class="token comment"># ä¿å­˜å·¥å…·æ å¼•ç”¨ï¼Œé¿å…é‡å¤åˆ›å»º</span>
        self<span class="token punctuation">.</span>main_toolbar <span class="token operator">=</span> <span class="token boolean">None</span>

        <span class="token comment"># åˆ›å»ºè‡ªå®šä¹‰é¡¶éƒ¨å·¥å…·æ </span>
        self<span class="token punctuation">.</span>create_custom_toolbar<span class="token punctuation">(</span><span class="token punctuation">)</span>
        
        <span class="token comment"># ä¸»å®¹å™¨</span>
        container <span class="token operator">=</span> QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>
        content <span class="token operator">=</span> QLabel<span class="token punctuation">(</span><span class="token string">'å°±è¿™æ ·çš„ä¾‹å­'</span><span class="token punctuation">)</span>
        <span class="token comment"># æ°´å¹³å±…ä¸­</span>
        layout <span class="token operator">=</span> QHBoxLayout<span class="token punctuation">(</span>container<span class="token punctuation">)</span>
        layout<span class="token punctuation">.</span>addStretch<span class="token punctuation">(</span><span class="token punctuation">)</span>
        layout<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>content<span class="token punctuation">)</span>
        layout<span class="token punctuation">.</span>addStretch<span class="token punctuation">(</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>setCentralWidget<span class="token punctuation">(</span>container<span class="token punctuation">)</span>

    
    <span class="token keyword">def</span> <span class="token function">create_custom_toolbar</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;åˆ›å»ºè‡ªå®šä¹‰é¡¶éƒ¨å·¥å…·æ &quot;&quot;&quot;</span>
        <span class="token comment"># åˆ›å»ºå·¥å…·æ </span>
        self<span class="token punctuation">.</span>main_toolbar <span class="token operator">=</span> self<span class="token punctuation">.</span>addToolBar<span class="token punctuation">(</span><span class="token string">&quot;ä¸»å·¥å…·æ &quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>setMovable<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>setFloatable<span class="token punctuation">(</span><span class="token boolean">False</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>setToolButtonStyle<span class="token punctuation">(</span>Qt<span class="token punctuation">.</span>ToolButtonTextBesideIcon<span class="token punctuation">)</span>
        
        <span class="token comment"># è®¾ç½®å·¥å…·æ æ ·å¼</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>setStyleSheet<span class="token punctuation">(</span><span class="token triple-quoted-string string">&quot;&quot;&quot;
            QToolBar {
                background-color: #f8f9fa;
                border: none;
                padding: 5px;
                spacing: 10px;
            }
            QToolBar QToolButton {
                background-color: transparent;
                border: 1px solid transparent;
                border-radius: 4px;
                padding: 8px 12px;
                margin: 2px;
                font-size: 14px;
            }
            QToolBar QToolButton:hover {
                background-color: #e9ecef;
                border-color: #ced4da;
            }
            QToolBar QToolButton:pressed {
                background-color: #dee2e6;
            }
            /* åº”ç”¨å›¾æ ‡å’ŒOCRå·¥å…·ç‰¹æ®Šæ ·å¼ - ç¦ç”¨æ‰€æœ‰äº¤äº’æ•ˆæœ */
            QToolBar QToolButton#app_icon,
            QToolBar QToolButton#ocr_tool {
                background-color: transparent !important;
                border: none !important;
                padding: 8px 12px;
            }
            QToolBar QToolButton#app_icon:hover,
            QToolBar QToolButton#ocr_tool:hover {
                background-color: transparent !important;
                border: none !important;
                color: black;
            }
            QToolBar QToolButton#app_icon:pressed,
            QToolBar QToolButton#ocr_tool:pressed {
                background-color: transparent !important;
                border: none !important;
                color: black;
            }
        &quot;&quot;&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># å·¦ä¾§åŠŸèƒ½æŒ‰é’®åŒºåŸŸ</span>
        <span class="token comment"># åº”ç”¨å›¾æ ‡ - ä½¿ç”¨å›¾ç‰‡æ–‡ä»¶ï¼Œå®Œå…¨æ— äº¤äº’</span>
        icon_path <span class="token operator">=</span> os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>join<span class="token punctuation">(</span>os<span class="token punctuation">.</span>path<span class="token punctuation">.</span>dirname<span class="token punctuation">(</span>__file__<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;static&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;favico.png&quot;</span><span class="token punctuation">)</span>
        app_icon_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span>QIcon<span class="token punctuation">(</span>icon_path<span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">&quot;&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        app_icon_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;åº”ç”¨å›¾æ ‡&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>app_icon_action<span class="token punctuation">)</span>
        
        <span class="token comment"># ä¸ºåº”ç”¨å›¾æ ‡æŒ‰é’®è®¾ç½®ç‰¹æ®ŠID</span>
        app_icon_button <span class="token operator">=</span> self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>widgetForAction<span class="token punctuation">(</span>app_icon_action<span class="token punctuation">)</span>
        <span class="token keyword">if</span> app_icon_button<span class="token punctuation">:</span>
            app_icon_button<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">&quot;app_icon&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># ä¿å­˜æŒ‰é’®</span>
        save_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;ğŸ’¾ ä¿å­˜&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        save_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;ä¿å­˜å½“å‰æ•°æ®&quot;</span><span class="token punctuation">)</span>
        save_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>save_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>save_action<span class="token punctuation">)</span>  <span class="token comment"># ä¿®å¤ï¼šä½¿ç”¨ self.main_toolbar</span>
        
        <span class="token comment"># æš‚å­˜åˆ°å•ä¸€çª—å£æŒ‰é’®</span>
        temp_save_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;ğŸ“„ æš‚å­˜&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        temp_save_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;æš‚å­˜åˆ°å•ä¸€çª—å£&quot;</span><span class="token punctuation">)</span>
        temp_save_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>temp_save_to_window<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>temp_save_action<span class="token punctuation">)</span>  <span class="token comment"># ä¿®å¤ï¼šä½¿ç”¨ self.main_toolbar</span>
        
        <span class="token comment"># ä½œåºŸæŒ‰é’®</span>
        void_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;ğŸ—‘ï¸ ä½œåºŸ&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        void_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;ä½œåºŸå½“å‰æ•°æ®&quot;</span><span class="token punctuation">)</span>
        void_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>void_data<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>void_action<span class="token punctuation">)</span>  <span class="token comment"># ä¿®å¤ï¼šä½¿ç”¨ self.main_toolbar</span>
        
        <span class="token comment"># æ·»åŠ å¼¹æ€§ç©ºé—´ï¼Œå°†å³ä¾§æŒ‰é’®æ¨åˆ°å³è¾¹</span>
        spacer <span class="token operator">=</span> QWidget<span class="token punctuation">(</span><span class="token punctuation">)</span>
        spacer<span class="token punctuation">.</span>setSizePolicy<span class="token punctuation">(</span>QSizePolicy<span class="token punctuation">.</span>Expanding<span class="token punctuation">,</span> QSizePolicy<span class="token punctuation">.</span>Preferred<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addWidget<span class="token punctuation">(</span>spacer<span class="token punctuation">)</span>  <span class="token comment"># ä¿®å¤ï¼šä½¿ç”¨ self.main_toolbar</span>
        
        <span class="token comment"># å³ä¾§çª—å£æ§åˆ¶æŒ‰é’®åŒºåŸŸ</span>
        <span class="token comment"># OCRè¯†åˆ«å·¥å…·å®¢æˆ·ç«¯ - ä¹Ÿç¦ç”¨äº¤äº’æ•ˆæœ</span>
        ocr_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;OCRè¯†åˆ«å·¥å…·å®¢æˆ·ç«¯&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        ocr_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;OCRè¯†åˆ«å·¥å…·å®¢æˆ·ç«¯&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># ä¸è¿æ¥ä»»ä½•ä¿¡å·ï¼Œä½¿å…¶æ— äº¤äº’</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>ocr_action<span class="token punctuation">)</span>
        <span class="token comment"># ä¸ºOCRå·¥å…·æŒ‰é’®è®¾ç½®ç‰¹æ®ŠID</span>
        ocr_button <span class="token operator">=</span> self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>widgetForAction<span class="token punctuation">(</span>ocr_action<span class="token punctuation">)</span>
        <span class="token keyword">if</span> ocr_button<span class="token punctuation">:</span>
            ocr_button<span class="token punctuation">.</span>setObjectName<span class="token punctuation">(</span><span class="token string">&quot;ocr_tool&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># æœ€å°åŒ–æŒ‰é’®</span>
        minimize_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;â–&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        minimize_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;æœ€å°åŒ–çª—å£&quot;</span><span class="token punctuation">)</span>
        minimize_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>showMinimized<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>minimize_action<span class="token punctuation">)</span>
        
        <span class="token comment"># æ”¾å¤§/è¿˜åŸæŒ‰é’®</span>
        self<span class="token punctuation">.</span>maximize_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;â¬œ&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;æœ€å¤§åŒ–çª—å£&quot;</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>toggle_maximize<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">)</span>
        
        <span class="token comment"># å…³é—­æŒ‰é’®</span>
        close_action <span class="token operator">=</span> QAction<span class="token punctuation">(</span><span class="token string">&quot;âŒ&quot;</span><span class="token punctuation">,</span> self<span class="token punctuation">)</span>
        close_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;å…³é—­åº”ç”¨&quot;</span><span class="token punctuation">)</span>
        close_action<span class="token punctuation">.</span>triggered<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>close<span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>addAction<span class="token punctuation">(</span>close_action<span class="token punctuation">)</span>
        
        <span class="token comment"># è®¾ç½®å…³é—­æŒ‰é’®çš„ç‰¹æ®Šæ ·å¼</span>
        close_button <span class="token operator">=</span> self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>widgetForAction<span class="token punctuation">(</span>close_action<span class="token punctuation">)</span>
        <span class="token keyword">if</span> close_button<span class="token punctuation">:</span>
            close_button<span class="token punctuation">.</span>setStyleSheet<span class="token punctuation">(</span><span class="token triple-quoted-string string">&quot;&quot;&quot;
                QToolButton {
                    background-color: transparent;
                    color: #dc3545;
                }
                QToolButton:hover {
                    background-color: #dc3545;
                    color: white;
                }
            &quot;&quot;&quot;</span><span class="token punctuation">)</span>
        
        <span class="token comment"># ã€é‡è¦ã€‘å®‰è£…äº‹ä»¶è¿‡æ»¤å™¨ä»¥å¯ç”¨æ‹–åŠ¨åŠŸèƒ½</span>
        self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">.</span>installEventFilter<span class="token punctuation">(</span>self<span class="token punctuation">)</span>
        
    <span class="token comment"># å·¥å…·æ æŒ‰é’®å¤„ç†æ–¹æ³•</span>
    <span class="token keyword">def</span> <span class="token function">save_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;ä¿å­˜æ•°æ®&quot;&quot;&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;ä¿å­˜æ•°æ®åŠŸèƒ½&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># è¿™é‡Œæ·»åŠ ä¿å­˜é€»è¾‘</span>
        
    <span class="token keyword">def</span> <span class="token function">temp_save_to_window</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;æš‚å­˜åˆ°å•ä¸€çª—å£&quot;&quot;&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;æš‚å­˜åˆ°å•ä¸€çª—å£åŠŸèƒ½&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># è¿™é‡Œæ·»åŠ æš‚å­˜é€»è¾‘</span>
        
    <span class="token keyword">def</span> <span class="token function">void_data</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;ä½œåºŸæ•°æ®&quot;&quot;&quot;</span>
        <span class="token keyword">print</span><span class="token punctuation">(</span><span class="token string">&quot;ä½œåºŸæ•°æ®åŠŸèƒ½&quot;</span><span class="token punctuation">)</span>
        <span class="token comment"># è¿™é‡Œæ·»åŠ ä½œåºŸé€»è¾‘</span>

    <span class="token keyword">def</span> <span class="token function">toggle_maximize</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;åˆ‡æ¢æœ€å¤§åŒ–/è¿˜åŸçª—å£&quot;&quot;&quot;</span>
        <span class="token keyword">if</span> self<span class="token punctuation">.</span>isMaximized<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>showNormal<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">&quot;â¬œ&quot;</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;æœ€å¤§åŒ–çª—å£&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">else</span><span class="token punctuation">:</span>
            self<span class="token punctuation">.</span>showMaximized<span class="token punctuation">(</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token string">&quot;ğŸ”²&quot;</span><span class="token punctuation">)</span>
            self<span class="token punctuation">.</span>maximize_action<span class="token punctuation">.</span>setToolTip<span class="token punctuation">(</span><span class="token string">&quot;è¿˜åŸçª—å£&quot;</span><span class="token punctuation">)</span>
    
    
    <span class="token comment"># çª—å£æ‹–åŠ¨</span>
    <span class="token keyword">def</span> <span class="token function">eventFilter</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> obj<span class="token punctuation">,</span> event<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token triple-quoted-string string">&quot;&quot;&quot;äº‹ä»¶è¿‡æ»¤å™¨ï¼Œå¤„ç†å·¥å…·æ çš„æ‹–åŠ¨äº‹ä»¶&quot;&quot;&quot;</span>
        <span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QEvent
        <span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtGui <span class="token keyword">import</span> QMouseEvent
        
        <span class="token comment"># åªå¤„ç†ä¸»å·¥å…·æ çš„é¼ æ ‡äº‹ä»¶</span>
        <span class="token keyword">if</span> obj <span class="token operator">==</span> self<span class="token punctuation">.</span>main_toolbar<span class="token punctuation">:</span>
            <span class="token keyword">if</span> event<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QEvent<span class="token punctuation">.</span>MouseButtonPress<span class="token punctuation">:</span>
                <span class="token keyword">if</span> event<span class="token punctuation">.</span>button<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token punctuation">.</span>LeftButton<span class="token punctuation">:</span>
                    <span class="token comment"># æ£€æŸ¥ç‚¹å‡»ä½ç½®æ˜¯å¦åœ¨æŒ‰é’®ä¸Š</span>
                    widget_at_pos <span class="token operator">=</span> obj<span class="token punctuation">.</span>childAt<span class="token punctuation">(</span>event<span class="token punctuation">.</span>pos<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
                    <span class="token keyword">if</span> widget_at_pos <span class="token keyword">is</span> <span class="token boolean">None</span> <span class="token keyword">or</span> <span class="token keyword">not</span> <span class="token builtin">hasattr</span><span class="token punctuation">(</span>widget_at_pos<span class="token punctuation">,</span> <span class="token string">'text'</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
                        <span class="token comment"># ç‚¹å‡»çš„æ˜¯ç©ºç™½åŒºåŸŸï¼Œå¼€å§‹æ‹–åŠ¨</span>
                        self<span class="token punctuation">.</span>drag_position <span class="token operator">=</span> event<span class="token punctuation">.</span>globalPos<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>frameGeometry<span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>topLeft<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        self<span class="token punctuation">.</span>is_dragging <span class="token operator">=</span> <span class="token boolean">True</span>
                        event<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
                        <span class="token keyword">return</span> <span class="token boolean">True</span>
                        
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QEvent<span class="token punctuation">.</span>MouseMove<span class="token punctuation">:</span>
                <span class="token keyword">if</span> self<span class="token punctuation">.</span>is_dragging <span class="token keyword">and</span> self<span class="token punctuation">.</span>drag_position <span class="token keyword">is</span> <span class="token keyword">not</span> <span class="token boolean">None</span><span class="token punctuation">:</span>
                    <span class="token comment"># æ‹–åŠ¨çª—å£</span>
                    self<span class="token punctuation">.</span>move<span class="token punctuation">(</span>event<span class="token punctuation">.</span>globalPos<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">-</span> self<span class="token punctuation">.</span>drag_position<span class="token punctuation">)</span>
                    event<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">True</span>
                    
            <span class="token keyword">elif</span> event<span class="token punctuation">.</span><span class="token builtin">type</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> QEvent<span class="token punctuation">.</span>MouseButtonRelease<span class="token punctuation">:</span>
                <span class="token keyword">if</span> event<span class="token punctuation">.</span>button<span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">==</span> Qt<span class="token punctuation">.</span>LeftButton<span class="token punctuation">:</span>
                    <span class="token comment"># åœæ­¢æ‹–åŠ¨</span>
                    self<span class="token punctuation">.</span>is_dragging <span class="token operator">=</span> <span class="token boolean">False</span>
                    self<span class="token punctuation">.</span>drag_position <span class="token operator">=</span> <span class="token boolean">None</span>
                    event<span class="token punctuation">.</span>accept<span class="token punctuation">(</span><span class="token punctuation">)</span>
                    <span class="token keyword">return</span> <span class="token boolean">True</span>
        
        <span class="token keyword">return</span> <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>eventFilter<span class="token punctuation">(</span>obj<span class="token punctuation">,</span> event<span class="token punctuation">)</span>

<span class="token keyword">if</span> __name__ <span class="token operator">==</span> <span class="token string">&quot;__main__&quot;</span><span class="token punctuation">:</span>
    app <span class="token operator">=</span> QApplication<span class="token punctuation">(</span>sys<span class="token punctuation">.</span>argv<span class="token punctuation">)</span>
    window <span class="token operator">=</span> MainWindow<span class="token punctuation">(</span><span class="token punctuation">)</span>
    window<span class="token punctuation">.</span>show<span class="token punctuation">(</span><span class="token punctuation">)</span>
    sys<span class="token punctuation">.</span>exit<span class="token punctuation">(</span>app<span class="token punctuation">.</span><span class="token keyword">exec</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br><span class="line-number">61</span><br><span class="line-number">62</span><br><span class="line-number">63</span><br><span class="line-number">64</span><br><span class="line-number">65</span><br><span class="line-number">66</span><br><span class="line-number">67</span><br><span class="line-number">68</span><br><span class="line-number">69</span><br><span class="line-number">70</span><br><span class="line-number">71</span><br><span class="line-number">72</span><br><span class="line-number">73</span><br><span class="line-number">74</span><br><span class="line-number">75</span><br><span class="line-number">76</span><br><span class="line-number">77</span><br><span class="line-number">78</span><br><span class="line-number">79</span><br><span class="line-number">80</span><br><span class="line-number">81</span><br><span class="line-number">82</span><br><span class="line-number">83</span><br><span class="line-number">84</span><br><span class="line-number">85</span><br><span class="line-number">86</span><br><span class="line-number">87</span><br><span class="line-number">88</span><br><span class="line-number">89</span><br><span class="line-number">90</span><br><span class="line-number">91</span><br><span class="line-number">92</span><br><span class="line-number">93</span><br><span class="line-number">94</span><br><span class="line-number">95</span><br><span class="line-number">96</span><br><span class="line-number">97</span><br><span class="line-number">98</span><br><span class="line-number">99</span><br><span class="line-number">100</span><br><span class="line-number">101</span><br><span class="line-number">102</span><br><span class="line-number">103</span><br><span class="line-number">104</span><br><span class="line-number">105</span><br><span class="line-number">106</span><br><span class="line-number">107</span><br><span class="line-number">108</span><br><span class="line-number">109</span><br><span class="line-number">110</span><br><span class="line-number">111</span><br><span class="line-number">112</span><br><span class="line-number">113</span><br><span class="line-number">114</span><br><span class="line-number">115</span><br><span class="line-number">116</span><br><span class="line-number">117</span><br><span class="line-number">118</span><br><span class="line-number">119</span><br><span class="line-number">120</span><br><span class="line-number">121</span><br><span class="line-number">122</span><br><span class="line-number">123</span><br><span class="line-number">124</span><br><span class="line-number">125</span><br><span class="line-number">126</span><br><span class="line-number">127</span><br><span class="line-number">128</span><br><span class="line-number">129</span><br><span class="line-number">130</span><br><span class="line-number">131</span><br><span class="line-number">132</span><br><span class="line-number">133</span><br><span class="line-number">134</span><br><span class="line-number">135</span><br><span class="line-number">136</span><br><span class="line-number">137</span><br><span class="line-number">138</span><br><span class="line-number">139</span><br><span class="line-number">140</span><br><span class="line-number">141</span><br><span class="line-number">142</span><br><span class="line-number">143</span><br><span class="line-number">144</span><br><span class="line-number">145</span><br><span class="line-number">146</span><br><span class="line-number">147</span><br><span class="line-number">148</span><br><span class="line-number">149</span><br><span class="line-number">150</span><br><span class="line-number">151</span><br><span class="line-number">152</span><br><span class="line-number">153</span><br><span class="line-number">154</span><br><span class="line-number">155</span><br><span class="line-number">156</span><br><span class="line-number">157</span><br><span class="line-number">158</span><br><span class="line-number">159</span><br><span class="line-number">160</span><br><span class="line-number">161</span><br><span class="line-number">162</span><br><span class="line-number">163</span><br><span class="line-number">164</span><br><span class="line-number">165</span><br><span class="line-number">166</span><br><span class="line-number">167</span><br><span class="line-number">168</span><br><span class="line-number">169</span><br><span class="line-number">170</span><br><span class="line-number">171</span><br><span class="line-number">172</span><br><span class="line-number">173</span><br><span class="line-number">174</span><br><span class="line-number">175</span><br><span class="line-number">176</span><br><span class="line-number">177</span><br><span class="line-number">178</span><br><span class="line-number">179</span><br><span class="line-number">180</span><br><span class="line-number">181</span><br><span class="line-number">182</span><br><span class="line-number">183</span><br><span class="line-number">184</span><br><span class="line-number">185</span><br><span class="line-number">186</span><br><span class="line-number">187</span><br><span class="line-number">188</span><br><span class="line-number">189</span><br><span class="line-number">190</span><br><span class="line-number">191</span><br><span class="line-number">192</span><br><span class="line-number">193</span><br><span class="line-number">194</span><br><span class="line-number">195</span><br><span class="line-number">196</span><br><span class="line-number">197</span><br><span class="line-number">198</span><br><span class="line-number">199</span><br><span class="line-number">200</span><br><span class="line-number">201</span><br><span class="line-number">202</span><br><span class="line-number">203</span><br><span class="line-number">204</span><br><span class="line-number">205</span><br><span class="line-number">206</span><br><span class="line-number">207</span><br><span class="line-number">208</span><br><span class="line-number">209</span><br><span class="line-number">210</span><br><span class="line-number">211</span><br><span class="line-number">212</span><br><span class="line-number">213</span><br><span class="line-number">214</span><br><span class="line-number">215</span><br><span class="line-number">216</span><br><span class="line-number">217</span><br><span class="line-number">218</span><br><span class="line-number">219</span><br><span class="line-number">220</span><br><span class="line-number">221</span><br><span class="line-number">222</span><br><span class="line-number">223</span><br><span class="line-number">224</span><br><span class="line-number">225</span><br><span class="line-number">226</span><br><span class="line-number">227</span><br><span class="line-number">228</span><br><span class="line-number">229</span><br><span class="line-number">230</span><br><span class="line-number">231</span><br><span class="line-number">232</span><br><span class="line-number">233</span><br><span class="line-number">234</span><br><span class="line-number">235</span><br><span class="line-number">236</span><br><span class="line-number">237</span><br><span class="line-number">238</span><br><span class="line-number">239</span><br><span class="line-number">240</span><br><span class="line-number">241</span><br><span class="line-number">242</span><br><span class="line-number">243</span><br></div></div></details> <h2 id="æ•°æ®ä¼ é€’"><a href="#æ•°æ®ä¼ é€’" class="header-anchor">#</a> æ•°æ®ä¼ é€’</h2> <p>åœºæ™¯ï¼šæ¯”å¦‚ä¸»çª—å£å¼•ç”¨äº†aã€bä¸¤ä¸ªç»„ä»¶ï¼ˆçª—å£æ‰“å¼€å°±å·²ç»åˆå§‹åŒ–å®Œæˆäº†ï¼‰ï¼Œæ“ä½œaç»„ä»¶ä¸­çš„æŸä¸ªæŒ‰é’®ï¼Œè°ƒç”¨æ¥å£è·å–åˆ°çš„æ•°æ®ï¼Œéœ€è¦ä¼ å›ä¸»çª—å£å’Œbç»„ä»¶ï¼Œå¹¶ä¸”æ›´æ–°ä¸»çª—å£å’Œbç»„ä»¶çš„å†…å®¹ã€‚</p> <p>è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨å…¨å±€ä¿¡å·æ€»çº¿<code>Signal</code>ï¼Œç±»å‹ä¸å‰ç«¯çš„<code>EventBus</code>ç›¸åŒï¼Œéƒ½æ˜¯å…¨å±€çš„äº‹ä»¶æ€»çº¿ï¼Œç”¨äºåœ¨ä¸åŒç»„ä»¶ä¹‹é—´ä¼ é€’æ•°æ®ã€‚</p> <p>å®ç°æ­¥éª¤ï¼š</p> <ol><li>å®šä¹‰å…¨å±€ä¿¡å·æ€»çº¿<code>Signal</code>ï¼Œåœ¨ä¸»çª—å£ä¸­åˆå§‹åŒ–ã€‚</li> <li>åœ¨aç»„ä»¶ä¸­è°ƒç”¨æ¥å£è·å–æ•°æ®åï¼Œé€šè¿‡ä¿¡å·æ€»çº¿å°†æ•°æ®å‘é€ï¼ˆåªéœ€è¦å‘é€ä¸€æ¬¡ï¼Œå„ä¸ªç»„ä»¶éœ€è¦åˆ™è‡ªå·±è·å–å°±å¯ä»¥äº†ï¼‰ã€‚</li> <li>åœ¨ä¸»çª—å£ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ›´æ–°ä¸»çª—å£çš„å†…å®¹ã€‚</li> <li>åœ¨bç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ›´æ–°bç»„ä»¶çš„å†…å®¹ã€‚</li></ol> <details><summary><b>å®ç°ä»£ç </b></summary> <ol><li>åˆ›å»ºä¸€ä¸ªå…¨å±€ä¿¡å·æ€»çº¿<code>signal_bus</code>æ–‡ä»¶</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> Signal

<span class="token comment"># å®šä¹‰å…¨å±€ä¿¡å·æ€»çº¿</span>
<span class="token comment"># signal_bus.py å…¨å±€ä¿¡å·æ€»çº¿ï¼Œç®€åŒ–é€šä¿¡</span>
<span class="token keyword">from</span> PySide6<span class="token punctuation">.</span>QtCore <span class="token keyword">import</span> QObject<span class="token punctuation">,</span> Signal

<span class="token keyword">class</span> <span class="token class-name">SignalBus</span><span class="token punctuation">(</span>QObject<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># å®šä¹‰ä¸€ä¸ªé€šç”¨ä¿¡å·ï¼Œä¸Šä¼ æˆåŠŸåä¼ é€’æ•°æ®</span>
    file_uploaded <span class="token operator">=</span> Signal<span class="token punctuation">(</span><span class="token builtin">dict</span><span class="token punctuation">)</span>

<span class="token comment"># å®ä¾‹åŒ–ä¸€ä¸ªå…¨å±€ä¿¡å·æ€»çº¿</span>
signal_bus <span class="token operator">=</span> SignalBus<span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><ol start="2"><li>aç»„ä»¶ä¸­è°ƒç”¨æ¥å£è·å–æ•°æ®åï¼Œé€šè¿‡ä¿¡å·æ€»çº¿å°†æ•°æ®å‘é€ï¼ˆåªéœ€è¦å‘é€ä¸€æ¬¡ï¼Œå„ä¸ªç»„ä»¶éœ€è¦åˆ™è‡ªå·±è·å–å°±å¯ä»¥äº†ï¼‰ã€‚</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> signal_bus <span class="token keyword">import</span> signal_bus

<span class="token comment"># å‡è®¾è¿™æ˜¯aç»„ä»¶ä¸­çš„ä¸€ä¸ªæ–¹æ³•ï¼Œè°ƒç”¨æ¥å£è·å–æ•°æ®</span>
<span class="token keyword">def</span> <span class="token function">fetch_data</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token comment"># æ¨¡æ‹Ÿè·å–æ•°æ®</span>
    data <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">:</span> <span class="token string">&quot;å¼ ä¸‰&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;age&quot;</span><span class="token punctuation">:</span> <span class="token number">30</span><span class="token punctuation">}</span>
    <span class="token comment"># é€šè¿‡ä¿¡å·æ€»çº¿ä¼ é€’æ•°æ®</span>
    signal_bus<span class="token punctuation">.</span>file_uploaded<span class="token punctuation">.</span>emit<span class="token punctuation">(</span>data<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="3"><li>åœ¨ä¸»çª—å£ä¸­æ¥æ”¶ä¿¡å·ï¼Œæ›´æ–°ä¸»çª—å£çš„å†…å®¹ã€‚</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">from</span> signal_bus <span class="token keyword">import</span> signal_bus

<span class="token keyword">class</span> <span class="token class-name">MainWindow</span><span class="token punctuation">(</span>QMainWindow<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># ç»‘å®šå…¨å±€ä¿¡å·ï¼ˆæ¥æ”¶Aæ¨¡å—çš„ä¸Šä¼ æ•°æ®ï¼‰</span>
        signal_bus<span class="token punctuation">.</span>file_uploaded<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>update_main<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update_main</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># ä¸»é¡µé¢æ›´æ–°è§†å›¾</span>
        self<span class="token punctuation">.</span>name_label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>age_label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><ol start="4"><li>åœ¨bç»„ä»¶ä¸­å®šä¹‰ä¸€ä¸ªæ–¹æ³•ï¼Œç”¨äºæ›´æ–°bç»„ä»¶çš„å†…å®¹ã€‚</li></ol> <div class="language-python line-numbers-mode"><pre class="language-python"><code><span class="token keyword">class</span> <span class="token class-name">BComponent</span><span class="token punctuation">(</span>QWidget<span class="token punctuation">)</span><span class="token punctuation">:</span>
    <span class="token keyword">def</span> <span class="token function">__init__</span><span class="token punctuation">(</span>self<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token builtin">super</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span>__init__<span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment"># ç»‘å®šå…¨å±€ä¿¡å·ï¼ˆæ¥æ”¶Aæ¨¡å—çš„ä¸Šä¼ æ•°æ®ï¼‰</span>
        signal_bus<span class="token punctuation">.</span>file_uploaded<span class="token punctuation">.</span>connect<span class="token punctuation">(</span>self<span class="token punctuation">.</span>update_main<span class="token punctuation">)</span>

    <span class="token keyword">def</span> <span class="token function">update_main</span><span class="token punctuation">(</span>self<span class="token punctuation">,</span> data<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token comment"># bç»„ä»¶æ›´æ–°è§†å›¾</span>
        self<span class="token punctuation">.</span>name_label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;name&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
        self<span class="token punctuation">.</span>age_label<span class="token punctuation">.</span>setText<span class="token punctuation">(</span><span class="token builtin">str</span><span class="token punctuation">(</span>data<span class="token punctuation">[</span><span class="token string">&quot;age&quot;</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div></details> <h2 id="pyside6å¯è§†åŒ–ä½¿ç”¨"><a href="#pyside6å¯è§†åŒ–ä½¿ç”¨" class="header-anchor">#</a> Pyside6å¯è§†åŒ–ä½¿ç”¨</h2></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      â†
      <a href="/blog/article/Python/Grammar.html" class="prev">
        Grammar
      </a></span> <span class="next"><a href="/blog/article/Python/Use.html">
        Use
      </a>
      â†’
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/blog/assets/js/app.95d1cef2.js" defer></script><script src="/blog/assets/js/2.dd56d6fa.js" defer></script><script src="/blog/assets/js/1.05d0606b.js" defer></script><script src="/blog/assets/js/64.4db62b40.js" defer></script>
  </body>
</html>
